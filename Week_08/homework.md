> *遗留问题*
>
> - shardingsphere insert分表成功，但是select、update、delete未分表
>   - 需要自定义分表规则？
>
> ```
> --启动两个mysql容器
> docker run --name mysql-0803 -p 3311:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql
> docker run --name mysql-0804 -p 3312:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql
> ```
>
> 1.ShardingSphere 动态分库运行日志
>
> ```
> 2021-03-17 11:21:30.558  INFO 15757 --- [           main] o.s.t.c.transaction.TransactionContext   : Began transaction (1) for test context [DefaultTestContext@5f049ea1 testClass = OrderTest, testInstance = com.week08.zachary.OrderTest@69af938b, testMethod = testOrder@OrderTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@72cc7e6f testClass = OrderTest, locations = '{}', classes = '{class com.week08.zachary.ZacharyApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@b62fe6d, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@37e547da, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2cbb3d47, org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@10db82ae, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@5bfa9431, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@5e955596], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true, 'org.springframework.test.context.event.ApplicationEventsTestExecutionListener.recordApplicationEvents' -> false]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@1df8e685]; rollback [true]
> 2021-03-17 11:21:31.367  INFO 15757 --- [           main] ShardingSphere-SQL                       : Rule Type: sharding
> 2021-03-17 11:21:31.367  INFO 15757 --- [           main] ShardingSphere-SQL                       : Logic SQL: insert into order_g (create_time, order_no, product_id, remark, status, submit_time, update_time, user_id, worksite) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
> 2021-03-17 11:21:31.367  INFO 15757 --- [           main] ShardingSphere-SQL                       : SQLStatement: InsertStatement(super=DMLStatement(super=AbstractSQLStatement(type=DML, tables=Tables(tables=[Table(name=order_g, alias=Optional.absent())]), routeConditions=Conditions(orCondition=OrCondition(andConditions=[AndCondition(conditions=[Condition(column=Column(name=user_id, tableName=order_g), operator=EQUAL, compareOperator=null, positionValueMap={}, positionIndexMap={0=7})])])), encryptConditions=Conditions(orCondition=OrCondition(andConditions=[])), sqlTokens=[TableToken(tableName=order_g, quoteCharacter=NONE, schemaNameLength=0), SQLToken(startIndex=20)], parametersIndex=9, logicSQL=insert into order_g (create_time, order_no, product_id, remark, status, submit_time, update_time, user_id, worksite) values (?, ?, ?, ?, ?, ?, ?, ?, ?)), deleteStatement=false, updateTableAlias={}, updateColumnValues={}, whereStartIndex=0, whereStopIndex=0, whereParameterStartIndex=0, whereParameterEndIndex=0), columnNames=[create_time, order_no, product_id, remark, status, submit_time, update_time, user_id, worksite], values=[InsertValue(columnValues=[org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@452d4bb2, org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@a1143cc, org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@62857555, org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@48149568, org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@674b2703, org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@67441705, org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@2ea2f965, org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@4271960c, org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@7cbcd27e])])
> 2021-03-17 11:21:31.367  INFO 15757 --- [           main] ShardingSphere-SQL                       : Actual SQL: zdb1 ::: insert into order_g  (create_time, order_no, product_id, remark, status, submit_time, update_time, user_id, worksite) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) ::: [2021-03-17 11:21:30.761, OR2021031706, 1, 测试, 1, null, 2021-03-17 11:21:30.761, 1, 测试]
> 2021-03-17 11:21:31.607  INFO 15757 --- [           main] ShardingSphere-SQL                       : Rule Type: sharding
> 2021-03-17 11:21:31.607  INFO 15757 --- [           main] ShardingSphere-SQL                       : Logic SQL: select orderg0_.id as id1_6_, orderg0_.create_time as create_t2_6_, orderg0_.order_no as order_no3_6_, orderg0_.product_id as product_4_6_, orderg0_.remark as remark5_6_, orderg0_.status as status6_6_, orderg0_.submit_time as submit_t7_6_, orderg0_.update_time as update_t8_6_, orderg0_.user_id as user_id9_6_, orderg0_.worksite as worksit10_6_ from order_g orderg0_ where orderg0_.order_no=? and orderg0_.product_id=1 and orderg0_.user_id=1
> 2021-03-17 11:21:31.607  INFO 15757 --- [           main] ShardingSphere-SQL                       : SQLStatement: SelectStatement(super=DQLStatement(super=AbstractSQLStatement(type=DQL, tables=Tables(tables=[Table(name=order_g, alias=Optional.of(orderg0_))]), routeConditions=Conditions(orCondition=OrCondition(andConditions=[AndCondition(conditions=[Condition(column=Column(name=user_id, tableName=order_g), operator=EQUAL, compareOperator==, positionValueMap={0=1}, positionIndexMap={})])])), encryptConditions=Conditions(orCondition=OrCondition(andConditions=[])), sqlTokens=[TableToken(tableName=order_g, quoteCharacter=NONE, schemaNameLength=0)], parametersIndex=1, logicSQL=select orderg0_.id as id1_6_, orderg0_.create_time as create_t2_6_, orderg0_.order_no as order_no3_6_, orderg0_.product_id as product_4_6_, orderg0_.remark as remark5_6_, orderg0_.status as status6_6_, orderg0_.submit_time as submit_t7_6_, orderg0_.update_time as update_t8_6_, orderg0_.user_id as user_id9_6_, orderg0_.worksite as worksit10_6_ from order_g orderg0_ where orderg0_.order_no=? and orderg0_.product_id=1 and orderg0_.user_id=1)), containStar=false, firstSelectItemStartIndex=7, selectListStopIndex=343, groupByLastIndex=0, items=[CommonSelectItem(expression=orderg0_.id, alias=Optional.of(id1_6_)), CommonSelectItem(expression=orderg0_.create_time, alias=Optional.of(create_t2_6_)), CommonSelectItem(expression=orderg0_.order_no, alias=Optional.of(order_no3_6_)), CommonSelectItem(expression=orderg0_.product_id, alias=Optional.of(product_4_6_)), CommonSelectItem(expression=orderg0_.remark, alias=Optional.of(remark5_6_)), CommonSelectItem(expression=orderg0_.status, alias=Optional.of(status6_6_)), CommonSelectItem(expression=orderg0_.submit_time, alias=Optional.of(submit_t7_6_)), CommonSelectItem(expression=orderg0_.update_time, alias=Optional.of(update_t8_6_)), CommonSelectItem(expression=orderg0_.user_id, alias=Optional.of(user_id9_6_)), CommonSelectItem(expression=orderg0_.worksite, alias=Optional.of(worksit10_6_))], groupByItems=[], orderByItems=[], limit=null, subqueryStatement=null, subqueryStatements=[], subqueryConditions=[])
> 2021-03-17 11:21:31.607  INFO 15757 --- [           main] ShardingSphere-SQL                       : Actual SQL: zdb1 ::: select orderg0_.id as id1_6_, orderg0_.create_time as create_t2_6_, orderg0_.order_no as order_no3_6_, orderg0_.product_id as product_4_6_, orderg0_.remark as remark5_6_, orderg0_.status as status6_6_, orderg0_.submit_time as submit_t7_6_, orderg0_.update_time as update_t8_6_, orderg0_.user_id as user_id9_6_, orderg0_.worksite as worksit10_6_ from order_g orderg0_ where orderg0_.order_no=? and orderg0_.product_id=1 and orderg0_.user_id=1 ::: [OR2021031706]
> after add1: OrderVo(id=7, orderNo=OR2021031706, status=1, userId=1, productId=1, worksite=测试, remark=测试, createTime=Wed Mar 17 11:21:30 CST 2021, updateTime=Wed Mar 17 11:21:30 CST 2021, submitTime=null)
> 2021-03-17 11:21:31.652  INFO 15757 --- [           main] ShardingSphere-SQL                       : Rule Type: sharding
> 2021-03-17 11:21:31.652  INFO 15757 --- [           main] ShardingSphere-SQL                       : Logic SQL: update order_g set order_no=?, product_id=?, remark=?, status=?, submit_time=?, update_time=?, user_id=?, worksite=? where id=?
> 2021-03-17 11:21:31.652  INFO 15757 --- [           main] ShardingSphere-SQL                       : SQLStatement: DMLStatement(super=AbstractSQLStatement(type=DML, tables=Tables(tables=[Table(name=order_g, alias=Optional.absent())]), routeConditions=Conditions(orCondition=OrCondition(andConditions=[])), encryptConditions=Conditions(orCondition=OrCondition(andConditions=[])), sqlTokens=[TableToken(tableName=order_g, quoteCharacter=NONE, schemaNameLength=0)], parametersIndex=9, logicSQL=update order_g set order_no=?, product_id=?, remark=?, status=?, submit_time=?, update_time=?, user_id=?, worksite=? where id=?), deleteStatement=false, updateTableAlias={order_g=order_g}, updateColumnValues={Column(name=order_no, tableName=order_g)=org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@37b97394, Column(name=product_id, tableName=order_g)=org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@6f371390, Column(name=remark, tableName=order_g)=org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@4eba3c3f, Column(name=status, tableName=order_g)=org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@7a90796c, Column(name=submit_time, tableName=order_g)=org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@6c98079, Column(name=update_time, tableName=order_g)=org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@5135b8a3, Column(name=user_id, tableName=order_g)=org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@4ef12d7e, Column(name=worksite, tableName=order_g)=org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@375376d5}, whereStartIndex=117, whereStopIndex=126, whereParameterStartIndex=8, whereParameterEndIndex=8)
> 2021-03-17 11:21:31.652  INFO 15757 --- [           main] ShardingSphere-SQL                       : Actual SQL: zdb0 ::: update order_g set order_no=?, product_id=?, remark=?, status=?, submit_time=?, update_time=?, user_id=?, worksite=? where id=? ::: [OR2021031706, 1, 测试1, 1, null, 2021-03-17 11:21:31.644, 1, 测试1, 7]
> 2021-03-17 11:21:31.652  INFO 15757 --- [           main] ShardingSphere-SQL                       : Actual SQL: zdb1 ::: update order_g set order_no=?, product_id=?, remark=?, status=?, submit_time=?, update_time=?, user_id=?, worksite=? where id=? ::: [OR2021031706, 1, 测试1, 1, null, 2021-03-17 11:21:31.644, 1, 测试1, 7]
> 2021-03-17 11:21:31.674  INFO 15757 --- [           main] ShardingSphere-SQL                       : Rule Type: sharding
> 2021-03-17 11:21:31.675  INFO 15757 --- [           main] ShardingSphere-SQL                       : Logic SQL: select orderg0_.id as id1_6_, orderg0_.create_time as create_t2_6_, orderg0_.order_no as order_no3_6_, orderg0_.product_id as product_4_6_, orderg0_.remark as remark5_6_, orderg0_.status as status6_6_, orderg0_.submit_time as submit_t7_6_, orderg0_.update_time as update_t8_6_, orderg0_.user_id as user_id9_6_, orderg0_.worksite as worksit10_6_ from order_g orderg0_ where orderg0_.order_no=? and orderg0_.product_id=1 and orderg0_.user_id=1
> 2021-03-17 11:21:31.675  INFO 15757 --- [           main] ShardingSphere-SQL                       : SQLStatement: SelectStatement(super=DQLStatement(super=AbstractSQLStatement(type=DQL, tables=Tables(tables=[Table(name=order_g, alias=Optional.of(orderg0_))]), routeConditions=Conditions(orCondition=OrCondition(andConditions=[AndCondition(conditions=[Condition(column=Column(name=user_id, tableName=order_g), operator=EQUAL, compareOperator==, positionValueMap={0=1}, positionIndexMap={})])])), encryptConditions=Conditions(orCondition=OrCondition(andConditions=[])), sqlTokens=[TableToken(tableName=order_g, quoteCharacter=NONE, schemaNameLength=0)], parametersIndex=1, logicSQL=select orderg0_.id as id1_6_, orderg0_.create_time as create_t2_6_, orderg0_.order_no as order_no3_6_, orderg0_.product_id as product_4_6_, orderg0_.remark as remark5_6_, orderg0_.status as status6_6_, orderg0_.submit_time as submit_t7_6_, orderg0_.update_time as update_t8_6_, orderg0_.user_id as user_id9_6_, orderg0_.worksite as worksit10_6_ from order_g orderg0_ where orderg0_.order_no=? and orderg0_.product_id=1 and orderg0_.user_id=1)), containStar=false, firstSelectItemStartIndex=7, selectListStopIndex=343, groupByLastIndex=0, items=[CommonSelectItem(expression=orderg0_.id, alias=Optional.of(id1_6_)), CommonSelectItem(expression=orderg0_.create_time, alias=Optional.of(create_t2_6_)), CommonSelectItem(expression=orderg0_.order_no, alias=Optional.of(order_no3_6_)), CommonSelectItem(expression=orderg0_.product_id, alias=Optional.of(product_4_6_)), CommonSelectItem(expression=orderg0_.remark, alias=Optional.of(remark5_6_)), CommonSelectItem(expression=orderg0_.status, alias=Optional.of(status6_6_)), CommonSelectItem(expression=orderg0_.submit_time, alias=Optional.of(submit_t7_6_)), CommonSelectItem(expression=orderg0_.update_time, alias=Optional.of(update_t8_6_)), CommonSelectItem(expression=orderg0_.user_id, alias=Optional.of(user_id9_6_)), CommonSelectItem(expression=orderg0_.worksite, alias=Optional.of(worksit10_6_))], groupByItems=[], orderByItems=[], limit=null, subqueryStatement=null, subqueryStatements=[], subqueryConditions=[])
> 2021-03-17 11:21:31.675  INFO 15757 --- [           main] ShardingSphere-SQL                       : Actual SQL: zdb1 ::: select orderg0_.id as id1_6_, orderg0_.create_time as create_t2_6_, orderg0_.order_no as order_no3_6_, orderg0_.product_id as product_4_6_, orderg0_.remark as remark5_6_, orderg0_.status as status6_6_, orderg0_.submit_time as submit_t7_6_, orderg0_.update_time as update_t8_6_, orderg0_.user_id as user_id9_6_, orderg0_.worksite as worksit10_6_ from order_g orderg0_ where orderg0_.order_no=? and orderg0_.product_id=1 and orderg0_.user_id=1 ::: [OR2021031706]
> after update1: OrderVo(id=7, orderNo=OR2021031706, status=1, userId=1, productId=1, worksite=测试1, remark=测试1, createTime=Wed Mar 17 11:21:30 CST 2021, updateTime=Wed Mar 17 11:21:31 CST 2021, submitTime=null)
> 2021-03-17 11:21:31.690  INFO 15757 --- [           main] ShardingSphere-SQL                       : Rule Type: sharding
> 2021-03-17 11:21:31.691  INFO 15757 --- [           main] ShardingSphere-SQL                       : Logic SQL: delete from order_g where id=?
> 2021-03-17 11:21:31.691  INFO 15757 --- [           main] ShardingSphere-SQL                       : SQLStatement: DMLStatement(super=AbstractSQLStatement(type=DML, tables=Tables(tables=[Table(name=order_g, alias=Optional.absent())]), routeConditions=Conditions(orCondition=OrCondition(andConditions=[])), encryptConditions=Conditions(orCondition=OrCondition(andConditions=[])), sqlTokens=[TableToken(tableName=order_g, quoteCharacter=NONE, schemaNameLength=0)], parametersIndex=1, logicSQL=delete from order_g where id=?), deleteStatement=true, updateTableAlias={order_g=order_g}, updateColumnValues={}, whereStartIndex=20, whereStopIndex=29, whereParameterStartIndex=0, whereParameterEndIndex=0)
> 2021-03-17 11:21:31.691  INFO 15757 --- [           main] ShardingSphere-SQL                       : Actual SQL: zdb0 ::: delete from order_g where id=? ::: [7]
> 2021-03-17 11:21:31.691  INFO 15757 --- [           main] ShardingSphere-SQL                       : Actual SQL: zdb1 ::: delete from order_g where id=? ::: [7]
> 2021-03-17 11:21:31.697  INFO 15757 --- [           main] ShardingSphere-SQL                       : Rule Type: sharding
> 2021-03-17 11:21:31.698  INFO 15757 --- [           main] ShardingSphere-SQL                       : Logic SQL: select orderg0_.id as id1_6_, orderg0_.create_time as create_t2_6_, orderg0_.order_no as order_no3_6_, orderg0_.product_id as product_4_6_, orderg0_.remark as remark5_6_, orderg0_.status as status6_6_, orderg0_.submit_time as submit_t7_6_, orderg0_.update_time as update_t8_6_, orderg0_.user_id as user_id9_6_, orderg0_.worksite as worksit10_6_ from order_g orderg0_ where orderg0_.order_no=? and orderg0_.product_id=1 and orderg0_.user_id=1
> 2021-03-17 11:21:31.698  INFO 15757 --- [           main] ShardingSphere-SQL                       : SQLStatement: SelectStatement(super=DQLStatement(super=AbstractSQLStatement(type=DQL, tables=Tables(tables=[Table(name=order_g, alias=Optional.of(orderg0_))]), routeConditions=Conditions(orCondition=OrCondition(andConditions=[AndCondition(conditions=[Condition(column=Column(name=user_id, tableName=order_g), operator=EQUAL, compareOperator==, positionValueMap={0=1}, positionIndexMap={})])])), encryptConditions=Conditions(orCondition=OrCondition(andConditions=[])), sqlTokens=[TableToken(tableName=order_g, quoteCharacter=NONE, schemaNameLength=0)], parametersIndex=1, logicSQL=select orderg0_.id as id1_6_, orderg0_.create_time as create_t2_6_, orderg0_.order_no as order_no3_6_, orderg0_.product_id as product_4_6_, orderg0_.remark as remark5_6_, orderg0_.status as status6_6_, orderg0_.submit_time as submit_t7_6_, orderg0_.update_time as update_t8_6_, orderg0_.user_id as user_id9_6_, orderg0_.worksite as worksit10_6_ from order_g orderg0_ where orderg0_.order_no=? and orderg0_.product_id=1 and orderg0_.user_id=1)), containStar=false, firstSelectItemStartIndex=7, selectListStopIndex=343, groupByLastIndex=0, items=[CommonSelectItem(expression=orderg0_.id, alias=Optional.of(id1_6_)), CommonSelectItem(expression=orderg0_.create_time, alias=Optional.of(create_t2_6_)), CommonSelectItem(expression=orderg0_.order_no, alias=Optional.of(order_no3_6_)), CommonSelectItem(expression=orderg0_.product_id, alias=Optional.of(product_4_6_)), CommonSelectItem(expression=orderg0_.remark, alias=Optional.of(remark5_6_)), CommonSelectItem(expression=orderg0_.status, alias=Optional.of(status6_6_)), CommonSelectItem(expression=orderg0_.submit_time, alias=Optional.of(submit_t7_6_)), CommonSelectItem(expression=orderg0_.update_time, alias=Optional.of(update_t8_6_)), CommonSelectItem(expression=orderg0_.user_id, alias=Optional.of(user_id9_6_)), CommonSelectItem(expression=orderg0_.worksite, alias=Optional.of(worksit10_6_))], groupByItems=[], orderByItems=[], limit=null, subqueryStatement=null, subqueryStatements=[], subqueryConditions=[])
> 2021-03-17 11:21:31.698  INFO 15757 --- [           main] ShardingSphere-SQL                       : Actual SQL: zdb1 ::: select orderg0_.id as id1_6_, orderg0_.create_time as create_t2_6_, orderg0_.order_no as order_no3_6_, orderg0_.product_id as product_4_6_, orderg0_.remark as remark5_6_, orderg0_.status as status6_6_, orderg0_.submit_time as submit_t7_6_, orderg0_.update_time as update_t8_6_, orderg0_.user_id as user_id9_6_, orderg0_.worksite as worksit10_6_ from order_g orderg0_ where orderg0_.order_no=? and orderg0_.product_id=1 and orderg0_.user_id=1 ::: [OR2021031706]
> after delete1: OrderVo(id=null, orderNo=null, status=null, userId=0, productId=0, worksite=null, remark=null, createTime=null, updateTime=null, submitTime=null)
> 2021-03-17 11:21:31.704  INFO 15757 --- [           main] ShardingSphere-SQL                       : Rule Type: sharding
> 2021-03-17 11:21:31.704  INFO 15757 --- [           main] ShardingSphere-SQL                       : Logic SQL: insert into order_h (create_time, order_no, product_id, remark, status, submit_time, update_time, user_id, worksite) values (?, ?, ?, ?, ?, ?, ?, ?, ?)
> 2021-03-17 11:21:31.704  INFO 15757 --- [           main] ShardingSphere-SQL                       : SQLStatement: InsertStatement(super=DMLStatement(super=AbstractSQLStatement(type=DML, tables=Tables(tables=[Table(name=order_h, alias=Optional.absent())]), routeConditions=Conditions(orCondition=OrCondition(andConditions=[AndCondition(conditions=[Condition(column=Column(name=user_id, tableName=order_h), operator=EQUAL, compareOperator=null, positionValueMap={}, positionIndexMap={0=7})])])), encryptConditions=Conditions(orCondition=OrCondition(andConditions=[])), sqlTokens=[TableToken(tableName=order_h, quoteCharacter=NONE, schemaNameLength=0), SQLToken(startIndex=20)], parametersIndex=9, logicSQL=insert into order_h (create_time, order_no, product_id, remark, status, submit_time, update_time, user_id, worksite) values (?, ?, ?, ?, ?, ?, ?, ?, ?)), deleteStatement=false, updateTableAlias={}, updateColumnValues={}, whereStartIndex=0, whereStopIndex=0, whereParameterStartIndex=0, whereParameterEndIndex=0), columnNames=[create_time, order_no, product_id, remark, status, submit_time, update_time, user_id, worksite], values=[InsertValue(columnValues=[org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@74534564, org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@5876cd86, org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@6d398593, org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@3d70dab8, org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@53e6c017, org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@3d123d10, org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@1ca6323c, org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@27b89e0a, org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@42bb0492])])
> 2021-03-17 11:21:31.704  INFO 15757 --- [           main] ShardingSphere-SQL                       : Actual SQL: zdb0 ::: insert into order_h  (create_time, order_no, product_id, remark, status, submit_time, update_time, user_id, worksite) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) ::: [2021-03-17 11:21:31.703, OR2021031707, 1, 测试, 1, null, 2021-03-17 11:21:31.703, 2, 测试]
> 2021-03-17 11:21:31.725  INFO 15757 --- [           main] ShardingSphere-SQL                       : Rule Type: sharding
> 2021-03-17 11:21:31.725  INFO 15757 --- [           main] ShardingSphere-SQL                       : Logic SQL: select orderh0_.id as id1_7_, orderh0_.create_time as create_t2_7_, orderh0_.order_no as order_no3_7_, orderh0_.product_id as product_4_7_, orderh0_.remark as remark5_7_, orderh0_.status as status6_7_, orderh0_.submit_time as submit_t7_7_, orderh0_.update_time as update_t8_7_, orderh0_.user_id as user_id9_7_, orderh0_.worksite as worksit10_7_ from order_h orderh0_ where orderh0_.product_id=1 and orderh0_.order_no=? and orderh0_.user_id=2
> 2021-03-17 11:21:31.725  INFO 15757 --- [           main] ShardingSphere-SQL                       : SQLStatement: SelectStatement(super=DQLStatement(super=AbstractSQLStatement(type=DQL, tables=Tables(tables=[Table(name=order_h, alias=Optional.of(orderh0_))]), routeConditions=Conditions(orCondition=OrCondition(andConditions=[AndCondition(conditions=[Condition(column=Column(name=user_id, tableName=order_h), operator=EQUAL, compareOperator==, positionValueMap={0=2}, positionIndexMap={})])])), encryptConditions=Conditions(orCondition=OrCondition(andConditions=[])), sqlTokens=[TableToken(tableName=order_h, quoteCharacter=NONE, schemaNameLength=0)], parametersIndex=1, logicSQL=select orderh0_.id as id1_7_, orderh0_.create_time as create_t2_7_, orderh0_.order_no as order_no3_7_, orderh0_.product_id as product_4_7_, orderh0_.remark as remark5_7_, orderh0_.status as status6_7_, orderh0_.submit_time as submit_t7_7_, orderh0_.update_time as update_t8_7_, orderh0_.user_id as user_id9_7_, orderh0_.worksite as worksit10_7_ from order_h orderh0_ where orderh0_.product_id=1 and orderh0_.order_no=? and orderh0_.user_id=2)), containStar=false, firstSelectItemStartIndex=7, selectListStopIndex=343, groupByLastIndex=0, items=[CommonSelectItem(expression=orderh0_.id, alias=Optional.of(id1_7_)), CommonSelectItem(expression=orderh0_.create_time, alias=Optional.of(create_t2_7_)), CommonSelectItem(expression=orderh0_.order_no, alias=Optional.of(order_no3_7_)), CommonSelectItem(expression=orderh0_.product_id, alias=Optional.of(product_4_7_)), CommonSelectItem(expression=orderh0_.remark, alias=Optional.of(remark5_7_)), CommonSelectItem(expression=orderh0_.status, alias=Optional.of(status6_7_)), CommonSelectItem(expression=orderh0_.submit_time, alias=Optional.of(submit_t7_7_)), CommonSelectItem(expression=orderh0_.update_time, alias=Optional.of(update_t8_7_)), CommonSelectItem(expression=orderh0_.user_id, alias=Optional.of(user_id9_7_)), CommonSelectItem(expression=orderh0_.worksite, alias=Optional.of(worksit10_7_))], groupByItems=[], orderByItems=[], limit=null, subqueryStatement=null, subqueryStatements=[], subqueryConditions=[])
> 2021-03-17 11:21:31.725  INFO 15757 --- [           main] ShardingSphere-SQL                       : Actual SQL: zdb0 ::: select orderh0_.id as id1_7_, orderh0_.create_time as create_t2_7_, orderh0_.order_no as order_no3_7_, orderh0_.product_id as product_4_7_, orderh0_.remark as remark5_7_, orderh0_.status as status6_7_, orderh0_.submit_time as submit_t7_7_, orderh0_.update_time as update_t8_7_, orderh0_.user_id as user_id9_7_, orderh0_.worksite as worksit10_7_ from order_h orderh0_ where orderh0_.product_id=1 and orderh0_.order_no=? and orderh0_.user_id=2 ::: [OR2021031707]
> after add2: OrderVo(id=1, orderNo=OR2021031707, status=1, userId=2, productId=1, worksite=测试, remark=测试, createTime=Wed Mar 17 11:21:31 CST 2021, updateTime=Wed Mar 17 11:21:31 CST 2021, submitTime=null)
> 2021-03-17 11:21:31.732  INFO 15757 --- [           main] ShardingSphere-SQL                       : Rule Type: sharding
> 2021-03-17 11:21:31.732  INFO 15757 --- [           main] ShardingSphere-SQL                       : Logic SQL: update order_h set order_no=?, product_id=?, remark=?, status=?, submit_time=?, update_time=?, user_id=?, worksite=? where id=?
> 2021-03-17 11:21:31.732  INFO 15757 --- [           main] ShardingSphere-SQL                       : SQLStatement: DMLStatement(super=AbstractSQLStatement(type=DML, tables=Tables(tables=[Table(name=order_h, alias=Optional.absent())]), routeConditions=Conditions(orCondition=OrCondition(andConditions=[])), encryptConditions=Conditions(orCondition=OrCondition(andConditions=[])), sqlTokens=[TableToken(tableName=order_h, quoteCharacter=NONE, schemaNameLength=0)], parametersIndex=9, logicSQL=update order_h set order_no=?, product_id=?, remark=?, status=?, submit_time=?, update_time=?, user_id=?, worksite=? where id=?), deleteStatement=false, updateTableAlias={order_h=order_h}, updateColumnValues={Column(name=order_no, tableName=order_h)=org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@4ff1f872, Column(name=product_id, tableName=order_h)=org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@7c3920a7, Column(name=remark, tableName=order_h)=org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@12e5f7cb, Column(name=status, tableName=order_h)=org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@2df05bd1, Column(name=submit_time, tableName=order_h)=org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@6d821475, Column(name=update_time, tableName=order_h)=org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@588b2d7a, Column(name=user_id, tableName=order_h)=org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@656dc20f, Column(name=worksite, tableName=order_h)=org.apache.shardingsphere.core.parse.old.parser.expression.SQLPlaceholderExpression@4a6c33a0}, whereStartIndex=117, whereStopIndex=126, whereParameterStartIndex=8, whereParameterEndIndex=8)
> 2021-03-17 11:21:31.732  INFO 15757 --- [           main] ShardingSphere-SQL                       : Actual SQL: zdb0 ::: update order_h set order_no=?, product_id=?, remark=?, status=?, submit_time=?, update_time=?, user_id=?, worksite=? where id=? ::: [OR2021031707, 1, 测试2, 1, null, 2021-03-17 11:21:31.729, 2, 测试2, 1]
> 2021-03-17 11:21:31.732  INFO 15757 --- [           main] ShardingSphere-SQL                       : Actual SQL: zdb1 ::: update order_h set order_no=?, product_id=?, remark=?, status=?, submit_time=?, update_time=?, user_id=?, worksite=? where id=? ::: [OR2021031707, 1, 测试2, 1, null, 2021-03-17 11:21:31.729, 2, 测试2, 1]
> 2021-03-17 11:21:31.738  INFO 15757 --- [           main] ShardingSphere-SQL                       : Rule Type: sharding
> 2021-03-17 11:21:31.738  INFO 15757 --- [           main] ShardingSphere-SQL                       : Logic SQL: select orderh0_.id as id1_7_, orderh0_.create_time as create_t2_7_, orderh0_.order_no as order_no3_7_, orderh0_.product_id as product_4_7_, orderh0_.remark as remark5_7_, orderh0_.status as status6_7_, orderh0_.submit_time as submit_t7_7_, orderh0_.update_time as update_t8_7_, orderh0_.user_id as user_id9_7_, orderh0_.worksite as worksit10_7_ from order_h orderh0_ where orderh0_.product_id=1 and orderh0_.order_no=? and orderh0_.user_id=2
> 2021-03-17 11:21:31.738  INFO 15757 --- [           main] ShardingSphere-SQL                       : SQLStatement: SelectStatement(super=DQLStatement(super=AbstractSQLStatement(type=DQL, tables=Tables(tables=[Table(name=order_h, alias=Optional.of(orderh0_))]), routeConditions=Conditions(orCondition=OrCondition(andConditions=[AndCondition(conditions=[Condition(column=Column(name=user_id, tableName=order_h), operator=EQUAL, compareOperator==, positionValueMap={0=2}, positionIndexMap={})])])), encryptConditions=Conditions(orCondition=OrCondition(andConditions=[])), sqlTokens=[TableToken(tableName=order_h, quoteCharacter=NONE, schemaNameLength=0)], parametersIndex=1, logicSQL=select orderh0_.id as id1_7_, orderh0_.create_time as create_t2_7_, orderh0_.order_no as order_no3_7_, orderh0_.product_id as product_4_7_, orderh0_.remark as remark5_7_, orderh0_.status as status6_7_, orderh0_.submit_time as submit_t7_7_, orderh0_.update_time as update_t8_7_, orderh0_.user_id as user_id9_7_, orderh0_.worksite as worksit10_7_ from order_h orderh0_ where orderh0_.product_id=1 and orderh0_.order_no=? and orderh0_.user_id=2)), containStar=false, firstSelectItemStartIndex=7, selectListStopIndex=343, groupByLastIndex=0, items=[CommonSelectItem(expression=orderh0_.id, alias=Optional.of(id1_7_)), CommonSelectItem(expression=orderh0_.create_time, alias=Optional.of(create_t2_7_)), CommonSelectItem(expression=orderh0_.order_no, alias=Optional.of(order_no3_7_)), CommonSelectItem(expression=orderh0_.product_id, alias=Optional.of(product_4_7_)), CommonSelectItem(expression=orderh0_.remark, alias=Optional.of(remark5_7_)), CommonSelectItem(expression=orderh0_.status, alias=Optional.of(status6_7_)), CommonSelectItem(expression=orderh0_.submit_time, alias=Optional.of(submit_t7_7_)), CommonSelectItem(expression=orderh0_.update_time, alias=Optional.of(update_t8_7_)), CommonSelectItem(expression=orderh0_.user_id, alias=Optional.of(user_id9_7_)), CommonSelectItem(expression=orderh0_.worksite, alias=Optional.of(worksit10_7_))], groupByItems=[], orderByItems=[], limit=null, subqueryStatement=null, subqueryStatements=[], subqueryConditions=[])
> 2021-03-17 11:21:31.738  INFO 15757 --- [           main] ShardingSphere-SQL                       : Actual SQL: zdb0 ::: select orderh0_.id as id1_7_, orderh0_.create_time as create_t2_7_, orderh0_.order_no as order_no3_7_, orderh0_.product_id as product_4_7_, orderh0_.remark as remark5_7_, orderh0_.status as status6_7_, orderh0_.submit_time as submit_t7_7_, orderh0_.update_time as update_t8_7_, orderh0_.user_id as user_id9_7_, orderh0_.worksite as worksit10_7_ from order_h orderh0_ where orderh0_.product_id=1 and orderh0_.order_no=? and orderh0_.user_id=2 ::: [OR2021031707]
> after update2: OrderVo(id=1, orderNo=OR2021031707, status=1, userId=2, productId=1, worksite=测试2, remark=测试2, createTime=Wed Mar 17 11:21:31 CST 2021, updateTime=Wed Mar 17 11:21:31 CST 2021, submitTime=null)
> 2021-03-17 11:21:31.745  INFO 15757 --- [           main] ShardingSphere-SQL                       : Rule Type: sharding
> 2021-03-17 11:21:31.745  INFO 15757 --- [           main] ShardingSphere-SQL                       : Logic SQL: delete from order_h where id=?
> 2021-03-17 11:21:31.745  INFO 15757 --- [           main] ShardingSphere-SQL                       : SQLStatement: DMLStatement(super=AbstractSQLStatement(type=DML, tables=Tables(tables=[Table(name=order_h, alias=Optional.absent())]), routeConditions=Conditions(orCondition=OrCondition(andConditions=[])), encryptConditions=Conditions(orCondition=OrCondition(andConditions=[])), sqlTokens=[TableToken(tableName=order_h, quoteCharacter=NONE, schemaNameLength=0)], parametersIndex=1, logicSQL=delete from order_h where id=?), deleteStatement=true, updateTableAlias={order_h=order_h}, updateColumnValues={}, whereStartIndex=20, whereStopIndex=29, whereParameterStartIndex=0, whereParameterEndIndex=0)
> 2021-03-17 11:21:31.745  INFO 15757 --- [           main] ShardingSphere-SQL                       : Actual SQL: zdb0 ::: delete from order_h where id=? ::: [1]
> 2021-03-17 11:21:31.745  INFO 15757 --- [           main] ShardingSphere-SQL                       : Actual SQL: zdb1 ::: delete from order_h where id=? ::: [1]
> 2021-03-17 11:21:31.750  INFO 15757 --- [           main] ShardingSphere-SQL                       : Rule Type: sharding
> 2021-03-17 11:21:31.750  INFO 15757 --- [           main] ShardingSphere-SQL                       : Logic SQL: select orderh0_.id as id1_7_, orderh0_.create_time as create_t2_7_, orderh0_.order_no as order_no3_7_, orderh0_.product_id as product_4_7_, orderh0_.remark as remark5_7_, orderh0_.status as status6_7_, orderh0_.submit_time as submit_t7_7_, orderh0_.update_time as update_t8_7_, orderh0_.user_id as user_id9_7_, orderh0_.worksite as worksit10_7_ from order_h orderh0_ where orderh0_.product_id=1 and orderh0_.order_no=? and orderh0_.user_id=2
> 2021-03-17 11:21:31.750  INFO 15757 --- [           main] ShardingSphere-SQL                       : SQLStatement: SelectStatement(super=DQLStatement(super=AbstractSQLStatement(type=DQL, tables=Tables(tables=[Table(name=order_h, alias=Optional.of(orderh0_))]), routeConditions=Conditions(orCondition=OrCondition(andConditions=[AndCondition(conditions=[Condition(column=Column(name=user_id, tableName=order_h), operator=EQUAL, compareOperator==, positionValueMap={0=2}, positionIndexMap={})])])), encryptConditions=Conditions(orCondition=OrCondition(andConditions=[])), sqlTokens=[TableToken(tableName=order_h, quoteCharacter=NONE, schemaNameLength=0)], parametersIndex=1, logicSQL=select orderh0_.id as id1_7_, orderh0_.create_time as create_t2_7_, orderh0_.order_no as order_no3_7_, orderh0_.product_id as product_4_7_, orderh0_.remark as remark5_7_, orderh0_.status as status6_7_, orderh0_.submit_time as submit_t7_7_, orderh0_.update_time as update_t8_7_, orderh0_.user_id as user_id9_7_, orderh0_.worksite as worksit10_7_ from order_h orderh0_ where orderh0_.product_id=1 and orderh0_.order_no=? and orderh0_.user_id=2)), containStar=false, firstSelectItemStartIndex=7, selectListStopIndex=343, groupByLastIndex=0, items=[CommonSelectItem(expression=orderh0_.id, alias=Optional.of(id1_7_)), CommonSelectItem(expression=orderh0_.create_time, alias=Optional.of(create_t2_7_)), CommonSelectItem(expression=orderh0_.order_no, alias=Optional.of(order_no3_7_)), CommonSelectItem(expression=orderh0_.product_id, alias=Optional.of(product_4_7_)), CommonSelectItem(expression=orderh0_.remark, alias=Optional.of(remark5_7_)), CommonSelectItem(expression=orderh0_.status, alias=Optional.of(status6_7_)), CommonSelectItem(expression=orderh0_.submit_time, alias=Optional.of(submit_t7_7_)), CommonSelectItem(expression=orderh0_.update_time, alias=Optional.of(update_t8_7_)), CommonSelectItem(expression=orderh0_.user_id, alias=Optional.of(user_id9_7_)), CommonSelectItem(expression=orderh0_.worksite, alias=Optional.of(worksit10_7_))], groupByItems=[], orderByItems=[], limit=null, subqueryStatement=null, subqueryStatements=[], subqueryConditions=[])
> 2021-03-17 11:21:31.750  INFO 15757 --- [           main] ShardingSphere-SQL                       : Actual SQL: zdb0 ::: select orderh0_.id as id1_7_, orderh0_.create_time as create_t2_7_, orderh0_.order_no as order_no3_7_, orderh0_.product_id as product_4_7_, orderh0_.remark as remark5_7_, orderh0_.status as status6_7_, orderh0_.submit_time as submit_t7_7_, orderh0_.update_time as update_t8_7_, orderh0_.user_id as user_id9_7_, orderh0_.worksite as worksit10_7_ from order_h orderh0_ where orderh0_.product_id=1 and orderh0_.order_no=? and orderh0_.user_id=2 ::: [OR2021031707]
> after delete2: OrderVo(id=null, orderNo=null, status=null, userId=0, productId=0, worksite=null, remark=null, createTime=null, updateTime=null, submitTime=null)
> 2021-03-17 11:21:31.774  INFO 15757 --- [           main] o.s.t.c.transaction.TransactionContext   : Rolled back transaction for test: [DefaultTestContext@5f049ea1 testClass = OrderTest, testInstance = com.week08.zachary.OrderTest@69af938b, testMethod = testOrder@OrderTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@72cc7e6f testClass = OrderTest, locations = '{}', classes = '{class com.week08.zachary.ZacharyApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@b62fe6d, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@37e547da, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@2cbb3d47, org.springframework.boot.test.autoconfigure.actuate.metrics.MetricsExportContextCustomizerFactory$DisableMetricExportContextCustomizer@10db82ae, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@5bfa9431, org.springframework.boot.test.context.SpringBootTestArgs@1, org.springframework.boot.test.context.SpringBootTestWebEnvironment@5e955596], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true, 'org.springframework.test.context.event.ApplicationEventsTestExecutionListener.recordApplicationEvents' -> false]]
> 
> ```
>
> 